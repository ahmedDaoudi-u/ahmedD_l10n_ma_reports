<odoo>
    <template id="payslip_template_inherited" inherit_id="hr_payroll.report_payslip">

        <xpath expr="//div[@class='page']" position="attributes">
            <attribute name="style">margin-top: 0px;margin-bottom: 0px;</attribute>
        </xpath>

        <xpath expr="//h2[@id='payslip_name']" position="attributes">
            <attribute name="style">display: none;</attribute>
        </xpath>

        <xpath expr="//strong[@id='invalid_warning']" position="attributes">
            <attribute name="style">display: none;</attribute>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_1']" position="replace">
            <div id="employee_info_table_1">
                <tr style="border-bottom: 1px solid black; text-align: center;">
                    <th style="width:10% ; text-align: center;background-color: #D7E4C0;" class="highlight-cell">
                        BULLETIN DE PAIE
                    </th>
                    <th colspan="2" style="text-align: center;">Période du:
                        <span t-field="o.date_from" style="color: #888888;"/>
                    </th>
                    <th style="text-align: center;">Au:
                        <span t-field="o.date_to" style="color: #888888;"/>
                    </th>
                    <th colspan="2" style="text-align: center;">Paiement le:
                        <span t-field="o.date_to" style="color: #888888;"/>
                    </th>
                    <th colspan="4" style="text-align: center;">Par:
                        <span t-field="o.type_payment" style="color: #888888;"/>
                    </th>
                </tr>
            </div>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_2']" position="replace">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_info_line_2'>
                <td rowspan="3" style="width:30%">
                    <span t-field="o.employee_id.company_id" style="color: #888888;text-align: center;"/>
                </td>
                <td style="text-align: center;">Matricule:
                    <span t-field="o.employee_id.registration_number" style="color: #888888;text-align: center;"/>
                </td>

                <td style="text-align: center;" colspan="3">Ancienneté:
                    <span t-set="duration" t-value="o.date_to - o.contract_id.date_start"/>
                    <t t-set="ans" t-value="duration.days//365"/>
                    <t t-set="mois" t-value="(duration.days % 365) // 30"/>
                    <t t-set="jours" t-value="(duration.days % 365) % 30"/>
                    <span t-esc="'{} ans, {} mois, et {} jours'.format(ans, mois, jours)"
                          style="color: #888888;text-align: center;"/>
                </td>

                <td style="text-align: center;">N°CNSS:
                    <span t-field="o.employee_id.l10n_ma_cin_number" style="color: #888888;text-align: center;"/>
                </td>
                <td style="text-align: center;">N°CIN:
                    <span t-field="o.employee_id.l10n_ma_cnss_number" style="color: #888888;text-align: center;"/>
                </td>
                <td style="text-align: center;" colspan="3">N°CIMR:
                    <span t-field="o.employee_id.l10n_ma_cimr_number" style="color: #888888;text-align: center;"/>
                </td>
            </tr>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_3']" position="replace">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_info_line_3'>
                <td style="text-align: center;">Catégorie:</td>
                <td style="text-align: center;" colspan="4">Emploi occupé:
                    <span t-field="o.employee_id.job_title" style="color: #888888;text-align: center;"/>
                </td>
                <td style="text-align: center;">Département:
                    <span t-field="o.employee_id.department_id" style="color: #888888;text-align: center;"/>
                </td>
                <td style="text-align: center;" colspan="3">Date d'éntrée:
                    <span t-field="o.contract_id.date_start" style="color: #888888;text-align: center;"/>
                </td>
            </tr>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_4']" position="replace">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_info_line_4'>
                <td style="text-align: center;">Qualification:</td>
                <td style="text-align: center;">Horaire:
                    <span t-field="o.worked_days_line_ids.number_of_hours"
                          style="color: #888888;text-align: center;"/>
                </td>
                <td style="text-align: center;" colspan="2">Salaire de base: (
                    <span class="text-capitalize"
                          t-out="o.contract_id.wage_type"/>
                    )
                    <span t-out="o.contract_id._get_contract_wage()" style="color: #888888;"/>
                </td>
                <td style="text-align: center;">Taux horraire:
                    <span t-field="o.employee_id.hourly_cost" style="color: #888888;"/>
                </td>
                <td style="text-align: center;">Situation familiale:
                    <span t-field="o.employee_id.marital" style="color: #888888;"/>
                </td>
                <td style="text-align: center;" colspan="3">Nbre déductions:</td>
            </tr>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_4']" position="after">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_info_5'>
                <td></td>
                <td style="text-align: center; background-color: #D7E4C0;" colspan="9" class="highlight-cell">
                    Address
                    Employe :
                    <span t-field="o.employee_id.address_id" style="color: #888888;text-align: center;"/>
                </td>
            </tr>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_5']" position="after">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_info_6'>
                <td style="text-align: center;" rowspan="2" colspan="2">Commentaire:
                    <span t-field="o.commentaire" style="color: #888888;"/>
                </td>
                <td style="text-align: center;" colspan="1">Congés</td>
                <td style="text-align: center;" colspan="2">Réliquat n-1</td>
                <td></td>
                <td style="text-align: center;">Pris
                    <span t-field="o.employee_id.leaves_count" style="color: #888888;"/>
                </td>
                <td style="text-align: center;" colspan="3"></td>
            </tr>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_6']" position="after">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_info_7'>
                <td style="text-align: center;" colspan="1"></td>
                <td style="text-align: center;" colspan="2">Droit
                    <span t-field="o.employee_id.allocation_count" style="color: #888888;"/>
                </td>

                <td></td>
                <td style="text-align: center;">Solde
                    <span t-field="o.employee_id.allocation_remaining_display" style="color: #888888;"/>
                </td>
                <td style="text-align: center;" colspan="3"></td>
            </tr>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_7']" position="after">
            <tr style="border-bottom: 1px solid black; text-align: center;background-color: #D5F0C1;"
                id='employee_info_8'>
                <td colspan="2" class="left">
                    <b>Désignation</b>
                </td>
                <td>
                    <b>Nombre</b>
                </td>
                <td>
                    <b>Base</b>
                </td>
                <td colspan="2">
                    <b>Taux</b>
                </td>
                <td>
                    <b>Gain</b>
                </td>
                <td colspan="2">
                    <b>Retenue</b>
                </td>
            </tr>
        </xpath>


        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_8']" position="after">
            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line">
                <tr t-att-class="line_class" t-att-style="line_style" id="employee_info_9">

                    <td id="payslip_line_name" colspan="2">
                        <span t-field="line.name"/>
                    </td>

                    <td id="payslip_line_quantity">
                        <span t-if="line.quantity &gt; 1" t-esc="line.quantity"/>
                    </td>

                    <td colspan="2"></td>
                    <td></td>

                    <td id="payslip_line_total" class="text-end">
                        <t t-if="line.name in ['Basic Salary', 'Kilometric Exemption', 'Transportation Exemption', 'House Rent Allowance', 'Dearness Allowance', 'Meal Allowance','Extra Hours 50%','Seniority','Gross']">
                            <span t-esc="line.total"
                                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}"
                                  t-att-style="'color:#875A7B;' if line.total &lt; 0 else ''"/>
                        </t>
                    </td>


                    <td>
                        <t t-if="line.name in ['Employee CNSS', 'Job Loss Allowance', 'CIMR', 'Employee AMO','Professional Contribution','Net Salary','Medical Allowance','Social Contribution']">
                            <t t-esc="line.total"
                               t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}"
                               t-att-style="'color:#875A7B;' if line.total &lt; 0 else ''"/>
                        </t>
                    </td>
                </tr>
            </span>
        </xpath>


        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_5']" position="attributes">
            <attribute name="style">display: none;</attribute>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_6']" position="attributes">
            <attribute name="style">display: none;</attribute>
        </xpath>

        <xpath expr="//table[@id='employee_info_table_1']//tr[@id='employee_info_line_7']" position="attributes">
            <attribute name="style">display: none;</attribute>
        </xpath>


        <xpath expr="//table[@class='table table-sm']//tr" position="replace">
            <tr style="border-bottom: 1px solid black; text-align: center; background-color: #74E291;
                           color: green;" id='employee_1'>
                <td></td>
                <td>Brut Imposable</td>
                <td>Net Imposable</td>
                <td>Ch.Salaires</td>
                <td>F.Professionnels</td>
                <td>Déd.Logement</td>
                <td>Déd.Charges Familales</td>
                <td>Jours Travaillés</td>
                <td colspan="3">Net A Payer</td>
            </tr>
        </xpath>

        <xpath expr="//table[@class='table table-sm']//tr[@id='employee_1']" position="after">
            <tr style="border-bottom: 1px solid black; text-align: center;" id='employee_2'>
                <td>Période</td>
                <td>
                    <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line"/>
                    <t t-if="line.name == 'Gross'">
                        <t t-esc="line.total"/>
                    </t>
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <span t-foreach="o.worked_days_line_ids" t-as="line" style="color: #888888;"/>
                    <t t-esc="line.number_of_days"/>
                </td>

                <td rowspan="2">
                    <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line"/>
                    <t t-if="line.name == 'Net Salary'">
                        <t t-esc="line.total"/>
                    </t>
                </td>

            </tr>
        </xpath>

        <xpath expr="//table[@class='table table-sm']//tr[@id='employee_2']" position="after">
            <tr style="border-bottom: 1px solid black; text-align: center; " id='employee_3'>
                <td>Année</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </xpath>


        <xpath expr="//div[@id='total']" position="attributes">
            <attribute name="style">display: none;</attribute>
        </xpath>

        <xpath expr="//div[@id='to_pay']" position="replace">
            <div id='to_pay'>
                <p style="text-align :center; margin-top:20 px;">DANS VOTRE INTERET ET POUR VOUS AIDER A FAIRE VALOIR
                    VOS DROITS,
                    CONSERVEZ CE
                    BULLETIN DE PAIE SANS LIMITATION DE DUREE
                </p>
            </div>
        </xpath>


        <xpath expr="//t[@t-set='line_style']" position="replace">
            <t t-set="line_style" t-value="'payslip_custom_paper_report'"/>
        </xpath>
    </template>


</odoo>